{"model_name_or_path": "default_gpt5__gpt-5-mini-2025-08-07__t-1.00__p-None__c-2.00___swe_bench_verified_test", "instance_id": "psf__requests-2317", "model_patch": "diff --git a/reproduce_method.py b/reproduce_method.py\nnew file mode 100644\nindex 0000000..9d27fbf\n--- /dev/null\n+++ b/reproduce_method.py\n@@ -0,0 +1,24 @@\n+from requests import Session\n+\n+s = Session()\n+\n+# monkeypatch send to inspect prepared request\n+import types\n+\n+def send_capture(self, request, **kwargs):\n+    print('Prepared request.method:', request.method, type(request.method))\n+    # Return a simple object mimicking Response used by Session.request\n+    class DummyResponse:\n+        def __init__(self):\n+            self.status_code = 200\n+            self.raw = None\n+            self.history = []\n+        def close(self):\n+            pass\n+    return DummyResponse()\n+\n+# Replace the instance method\n+s.send = types.MethodType(send_capture, s)\n+\n+# Call with bytes method\n+s.request(b'GET', 'http://example.com')\ndiff --git a/requests/sessions.py b/requests/sessions.py\nindex d701ff2..c3e5378 100644\n--- a/requests/sessions.py\n+++ b/requests/sessions.py\n@@ -425,7 +425,15 @@ class Session(SessionRedirectMixin):\n             If Tuple, ('cert', 'key') pair.\n         \"\"\"\n \n-        method = builtin_str(method)\n+        # Ensure method is a native string. If it's a bytes object, decode\n+        # to native str (on Python 3). If it's already a native string, keep\n+        # it as-is. Otherwise fall back to builtin_str() to reproduce the\n+        # original behavior for unexpected types.\n+        from .compat import bytes as compat_bytes\n+        if isinstance(method, (builtin_str, compat_bytes)):\n+            method = to_native_string(method)\n+        else:\n+            method = builtin_str(method)\n \n         # Create the Request.\n         req = Request(\n"}