{"id": 37, "timestamp": "2025-12-13T13:50:38.082939", "source": "agent", "message": "Command `sed -n '1,240p' matplotlib/lib/matplotlib/_api/deprecation.py` executed with exit code 0.", "cause": 36, "observation": "run", "tool_call_metadata": {"function_name": "execute_bash", "tool_call_id": "call_W4adMc3hoD5smjYWvGiitEWU", "model_response": {"id": "chatcmpl-CmKJ2F8nm7kN7KmnS83zpjAvukIiF", "created": 1765633836, "model": "gpt-5-mini-2025-08-07", "object": "chat.completion", "system_fingerprint": null, "choices": [{"finish_reason": "tool_calls", "index": 0, "message": {"content": null, "role": "assistant", "tool_calls": [{"function": {"arguments": "{\"command\":\"sed -n '1,240p' matplotlib/lib/matplotlib/_api/deprecation.py\",\"timeout\":120000,\"security_risk\":\"LOW\"}", "name": "execute_bash"}, "id": "call_W4adMc3hoD5smjYWvGiitEWU", "type": "function"}], "function_call": null, "annotations": []}, "provider_specific_fields": {}}], "usage": {"completion_tokens": 47, "prompt_tokens": 27762, "total_tokens": 27809, "completion_tokens_details": {"accepted_prediction_tokens": 0, "audio_tokens": 0, "reasoning_tokens": 0, "rejected_prediction_tokens": 0, "text_tokens": null}, "prompt_tokens_details": {"audio_tokens": 0, "cached_tokens": 27392, "text_tokens": null, "image_tokens": null}}, "service_tier": "default"}, "total_calls_in_response": 1}, "content": "\"\"\"\nHelper functions for deprecating parts of the Matplotlib API.\n\nThis documentation is only relevant for Matplotlib developers, not for users.\n\n.. warning::\n\n    This module is for internal use only.  Do not use it in your own code.\n    We may change the API at any time with no warning.\n\n\"\"\"\n\nimport contextlib\nimport functools\nimport inspect\nimport math\nimport warnings\n\n\nclass MatplotlibDeprecationWarning(DeprecationWarning):\n    \"\"\"A class for issuing deprecation warnings for Matplotlib users.\"\"\"\n\n\ndef _generate_deprecation_warning(\n        since, message='', name='', alternative='', pending=False, obj_type='',\n        addendum='', *, removal=''):\n    if pending:\n        if removal:\n            raise ValueError(\n                \"A pending deprecation cannot have a scheduled removal\")\n    else:\n        removal = f\"in {removal}\" if removal else \"two minor releases later\"\n    if not message:\n        message = (\n            (\"\\nThe %(name)s %(obj_type)s\" if obj_type else \"%(name)s\")\n            + (\" will be deprecated in a future version\"\n               if pending else\n               (\" was deprecated in Matplotlib %(since)s\"\n                + (\" and will be removed %(removal)s\" if removal else \"\")))\n            + \".\"\n            + (\" Use %(alternative)s instead.\" if alternative else \"\")\n            + (\" %(addendum)s\" if addendum else \"\"))\n    warning_cls = (PendingDeprecationWarning if pending\n                   else MatplotlibDeprecationWarning)\n    return warning_cls(message % dict(\n        func=name, name=name, obj_type=obj_type, since=since, removal=removal,\n        alternative=alternative, addendum=addendum))\n\n\ndef warn_deprecated(\n        since, *, message='', name='', alternative='', pending=False,\n        obj_type='', addendum='', removal=''):\n    \"\"\"\n    Display a standardized deprecation.\n\n    Parameters\n    ----------\n    since : str\n        The release at which this API became deprecated.\n    message : str, optional\n        Override the default deprecation message.  The ``%(since)s``,\n        ``%(name)s``, ``%(alternative)s``, ``%(obj_type)s``, ``%(addendum)s``,\n        and ``%(removal)s`` format specifiers will be replaced by the values\n        of the respective arguments passed to this function.\n    name : str, optional\n        The name of the deprecated object.\n    alternative : str, optional\n        An alternative API that the user may use in place of the deprecated\n        API.  The deprecation warning will tell the user about this alternative\n        if provided.\n    pending : bool, optional\n        If True, uses a PendingDeprecationWarning instead of a\n        DeprecationWarning.  Cannot be used together with *removal*.\n    obj_type : str, optional\n        The object type being deprecated.\n    addendum : str, optional\n        Additional text appended directly to the final message.\n    removal : str, optional\n        The expected removal version.  With the default (an empty string), a\n        removal version is automatically computed from *since*.  Set to other\n        Falsy values to not schedule a removal date.  Cannot be used together\n        with *pending*.\n\n    Examples\n    --------\n    ::\n\n        # To warn of the deprecation of \"matplotlib.name_of_module\"\n        warn_deprecated('1.4.0', name='matplotlib.name_of_module',\n                        obj_type='module')\n    \"\"\"\n    warning = _generate_deprecation_warning(\n        since, message, name, alternative, pending, obj_type, addendum,\n        removal=removal)\n    from . import warn_external\n    warn_external(warning, category=MatplotlibDeprecationWarning)\n\n\ndef deprecated(since, *, message='', name='', alternative='', pending=False,\n               obj_type=None, addendum='', removal=''):\n    \"\"\"\n    Decorator to mark a function, a class, or a property as deprecated.\n\n    When deprecating a classmethod, a staticmethod, or a property, the\n    ``@deprecated`` decorator should go *under* ``@classmethod`` and\n    ``@staticmethod`` (i.e., `deprecated` should directly decorate the\n    underlying callable), but *over* ``@property``.\n\n    When deprecating a class ``C`` intended to be used as a base class in a\n    multiple inheritance hierarchy, ``C`` *must* define an ``__init__`` method\n    (if ``C`` instead inherited its ``__init__`` from its own base class, then\n    ``@deprecated`` would mess up ``__init__`` inheritance when installing its\n    own (deprecation-emitting) ``C.__init__``).\n\n    Parameters are the same as for `warn_deprecated`, except that *obj_type*\n    defaults to 'class' if decorating a class, 'attribute' if decorating a\n    property, and 'function' otherwise.\n\n    Examples\n    --------\n    ::\n\n        @deprecated('1.4.0')\n        def the_function_to_deprecate():\n            pass\n    \"\"\"\n\n    def deprecate(obj, message=message, name=name, alternative=alternative,\n                  pending=pending, obj_type=obj_type, addendum=addendum):\n        from matplotlib._api import classproperty\n\n        if isinstance(obj, type):\n            if obj_type is None:\n                obj_type = \"class\"\n            func = obj.__init__\n            name = name or obj.__name__\n            old_doc = obj.__doc__\n\n            def finalize(wrapper, new_doc):\n                try:\n                    obj.__doc__ = new_doc\n                except AttributeError:  # Can't set on some extension objects.\n                    pass\n                obj.__init__ = functools.wraps(obj.__init__)(wrapper)\n                return obj\n\n        elif isinstance(obj, (property, classproperty)):\n            if obj_type is None:\n                obj_type = \"attribute\"\n            func = None\n            name = name or obj.fget.__name__\n            old_doc = obj.__doc__\n\n            class _deprecated_property(type(obj)):\n                def __get__(self, instance, owner=None):\n                    if instance is not None or owner is not None \\\n                            and isinstance(self, classproperty):\n                        emit_warning()\n                    return super().__get__(instance, owner)\n\n                def __set__(self, instance, value):\n                    if instance is not None:\n                        emit_warning()\n                    return super().__set__(instance, value)\n\n                def __delete__(self, instance):\n                    if instance is not None:\n                        emit_warning()\n                    return super().__delete__(instance)\n\n                def __set_name__(self, owner, set_name):\n                    nonlocal name\n                    if name == \"<lambda>\":\n                        name = set_name\n\n            def finalize(_, new_doc):\n                return _deprecated_property(\n                    fget=obj.fget, fset=obj.fset, fdel=obj.fdel, doc=new_doc)\n\n        else:\n            if obj_type is None:\n                obj_type = \"function\"\n            func = obj\n            name = name or obj.__name__\n            old_doc = func.__doc__\n\n            def finalize(wrapper, new_doc):\n                wrapper = functools.wraps(func)(wrapper)\n                wrapper.__doc__ = new_doc\n                return wrapper\n\n        def emit_warning():\n            warn_deprecated(\n                since, message=message, name=name, alternative=alternative,\n                pending=pending, obj_type=obj_type, addendum=addendum,\n                removal=removal)\n\n        def wrapper(*args, **kwargs):\n            emit_warning()\n            return func(*args, **kwargs)\n\n        old_doc = inspect.cleandoc(old_doc or '').strip('\\n')\n\n        notes_header = '\\nNotes\\n-----'\n        second_arg = ' '.join([t.strip() for t in\n                               (message, f\"Use {alternative} instead.\"\n                                if alternative else \"\", addendum) if t])\n        new_doc = (f\"[*Deprecated*] {old_doc}\\n\"\n                   f\"{notes_header if notes_header not in old_doc else ''}\\n\"\n                   f\".. deprecated:: {since}\\n\"\n                   f\"   {second_arg}\")\n\n        if not old_doc:\n            # This is to prevent a spurious 'unexpected unindent' warning from\n            # docutils when the original docstring was blank.\n            new_doc += r'\\ '\n\n        return finalize(wrapper, new_doc)\n\n    return deprecate\n\n\nclass deprecate_privatize_attribute:\n    \"\"\"\n    Helper to deprecate public access to an attribute (or method).\n\n    This helper should only be used at class scope, as follows::\n\n        class Foo:\n            attr = _deprecate_privatize_attribute(*args, **kwargs)\n\n    where *all* parameters are forwarded to `deprecated`.  This form makes\n    ``attr`` a property which forwards read and write access to ``self._attr``\n    (same name but with a leading underscore), with a deprecation warning.\n    Note that the attribute name is derived from *the name this helper is\n    assigned to*.  This helper also works for deprecating methods.\n    \"\"\"\n\n    def __init__(self, *args, **kwargs):\n        self.deprecator = deprecated(*args, **kwargs)", "extras": {"command": "sed -n '1,240p' matplotlib/lib/matplotlib/_api/deprecation.py", "metadata": {"exit_code": 0, "pid": -1, "username": "root", "hostname": "883d42764748", "working_dir": "/workspace", "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python", "prefix": "", "suffix": "\n[The command completed with exit code 0.]"}, "hidden": false}, "success": true}