{
    "scikit-learn__scikit-learn-12585": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "scikit-learn__scikit-learn-12585",
        "model_patch": "diff --git a/sklearn/base.py b/sklearn/base.py\nindex 56ffb18bf..34998270c 100644\n--- a/sklearn/base.py\n+++ b/sklearn/base.py\n@@ -48,7 +48,7 @@ def clone(estimator, safe=True):\n     # XXX: not handling dictionaries\n     if estimator_type in (list, tuple, set, frozenset):\n         return estimator_type([clone(e, safe=safe) for e in estimator])\n-    elif not hasattr(estimator, 'get_params'):\n+    elif not hasattr(estimator, 'get_params') or isinstance(estimator, type):\n         if not safe:\n             return copy.deepcopy(estimator)\n         else:\n"
    },
    "pallets__flask-5014": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "pallets__flask-5014",
        "model_patch": "diff --git a/src/flask/blueprints.py b/src/flask/blueprints.py\nindex eb50585d..e515ec24 100644\n--- a/src/flask/blueprints.py\n+++ b/src/flask/blueprints.py\n@@ -190,6 +190,12 @@ class Blueprint(Scaffold):\n             root_path=root_path,\n         )\n \n+        # Ensure the blueprint has a usable name. Empty or whitespace-only\n+        # names will cause confusing behaviour when registering and\n+        # constructing endpoints, so disallow them explicitly.\n+        if not isinstance(name, str) or not name.strip():\n+            raise ValueError(\"'name' must be a non-empty string.\")\n+\n         if \".\" in name:\n             raise ValueError(\"'name' may not contain a dot '.' character.\")\n \ndiff --git a/src/flask/sessions.py b/src/flask/sessions.py\nindex 02b8cf76..50cda193 100644\n--- a/src/flask/sessions.py\n+++ b/src/flask/sessions.py\n@@ -417,3 +417,17 @@ class SecureCookieSessionInterface(SessionInterface):\n             secure=secure,\n             samesite=samesite,\n         )\n+        # Preserve a leading dot in the Domain attribute of the\n+        # Set-Cookie header. Werkzeug may normalize the Domain by\n+        # stripping a leading dot; restore it for compatibility.\n+        try:\n+            if domain and domain.startswith(\".\"):\n+                header = response.headers.get(\"Set-Cookie\")\n+                if header and f\"Domain={domain.lstrip('.')}\" in header:\n+                    response.headers[\"Set-Cookie\"] = header.replace(\n+                        f\"Domain={domain.lstrip('.')}\", f\"Domain={domain}\", 1\n+                    )\n+        except Exception:\n+            # never fail session saving because of header tweaks\n+            pass\n+\n"
    },
    "psf__requests-2317": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "psf__requests-2317",
        "model_patch": "diff --git a/requests/models.py b/requests/models.py\nindex 3f6a4f9..d72ef6f 100644\n--- a/requests/models.py\n+++ b/requests/models.py\n@@ -327,9 +327,11 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n \n     def prepare_method(self, method):\n         \"\"\"Prepares the given HTTP method.\"\"\"\n-        self.method = method\n-        if self.method is not None:\n-            self.method = self.method.upper()\n+        # Normalize method to native string type to avoid byte-literal issues on Python 3\n+        if method is None:\n+            self.method = None\n+            return\n+        self.method = to_native_string(method).upper()\n \n     def prepare_url(self, url, params):\n         \"\"\"Prepares the given HTTP URL.\"\"\"\ndiff --git a/requests/sessions.py b/requests/sessions.py\nindex d701ff2..adcfbac 100644\n--- a/requests/sessions.py\n+++ b/requests/sessions.py\n@@ -425,7 +425,7 @@ class Session(SessionRedirectMixin):\n             If Tuple, ('cert', 'key') pair.\n         \"\"\"\n \n-        method = builtin_str(method)\n+        method = to_native_string(method)\n \n         # Create the Request.\n         req = Request(\n"
    },
    "matplotlib__matplotlib-22719": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "matplotlib__matplotlib-22719",
        "model_patch": "diff --git a/lib/matplotlib/category.py b/lib/matplotlib/category.py\nindex c823b68fd9..04334056cd 100644\n--- a/lib/matplotlib/category.py\n+++ b/lib/matplotlib/category.py\n@@ -53,6 +53,9 @@ class StrCategoryConverter(units.ConversionInterface):\n         StrCategoryConverter._validate_unit(unit)\n         # dtype = object preserves numerical pass throughs\n         values = np.atleast_1d(np.array(value, dtype=object))\n+        if values.size == 0:\n+            return np.asarray(values, dtype=float)\n+\n         # pass through sequence of non binary numbers\n         with _api.suppress_matplotlib_deprecation_warning():\n             is_numlike = all(units.ConversionInterface.is_numlike(v)\n"
    },
    "django__django-11099": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "django__django-11099",
        "model_patch": "diff --git a/django/contrib/auth/validators.py b/django/contrib/auth/validators.py\nindex b4878cfd45..1304f20a60 100644\n--- a/django/contrib/auth/validators.py\n+++ b/django/contrib/auth/validators.py\n@@ -7,7 +7,7 @@ from django.utils.translation import gettext_lazy as _\n \n @deconstructible\n class ASCIIUsernameValidator(validators.RegexValidator):\n-    regex = r'^[\\w.@+-]+$'\n+    regex = r'\\A[\\w.@+-]+\\Z'\n     message = _(\n         'Enter a valid username. This value may contain only English letters, '\n         'numbers, and @/./+/-/_ characters.'\n@@ -17,7 +17,7 @@ class ASCIIUsernameValidator(validators.RegexValidator):\n \n @deconstructible\n class UnicodeUsernameValidator(validators.RegexValidator):\n-    regex = r'^[\\w.@+-]+$'\n+    regex = r'\\A[\\w.@+-]+\\Z'\n     message = _(\n         'Enter a valid username. This value may contain only letters, '\n         'numbers, and @/./+/-/_ characters.'\n"
    },
    "sympy__sympy-13480": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "sympy__sympy-13480",
        "model_patch": "diff --git a/sympy/functions/elementary/hyperbolic.py b/sympy/functions/elementary/hyperbolic.py\nindex 2a4555d91..5fbb73c78 100644\n--- a/sympy/functions/elementary/hyperbolic.py\n+++ b/sympy/functions/elementary/hyperbolic.py\n@@ -587,7 +587,7 @@ def eval(cls, arg):\n                 x, m = _peeloff_ipi(arg)\n                 if m:\n                     cothm = coth(m)\n-                    if cotm is S.ComplexInfinity:\n+                    if cothm is S.ComplexInfinity:\n                         return coth(x)\n                     else: # cothm == 0\n                         return tanh(x)\n"
    },
    "matplotlib__matplotlib-20676": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "matplotlib__matplotlib-20676",
        "model_patch": "diff --git a/lib/matplotlib/widgets.py b/lib/matplotlib/widgets.py\nindex a199e45d4..aa9dac680 100644\n--- a/lib/matplotlib/widgets.py\n+++ b/lib/matplotlib/widgets.py\n@@ -19,6 +19,7 @@ import matplotlib as mpl\n from . import _api, cbook, colors, ticker\n from .lines import Line2D\n from .patches import Circle, Rectangle, Ellipse\n+import matplotlib.lines as mlines\n \n \n class LockDraw:\n@@ -2366,10 +2367,32 @@ class ToolLineHandles:\n             line_props = {}\n         line_props.update({'visible': False, 'animated': useblit})\n \n-        line_fun = ax.axvline if self.direction == 'horizontal' else ax.axhline\n         self._line_props = line_props\n \n-        self.artists = [line_fun(p, **line_props) for p in positions]\n+        # Preserve current axis limits so creating handle lines does not\n+        # inadvertently expand the data limits (e.g., when handles start at 0).\n+        if self.direction == 'horizontal':\n+            orig_xlim = ax.get_xlim()\n+            trans = ax.get_xaxis_transform(which='grid')\n+            self.artists = [mlines.Line2D([p, p], [0, 1], transform=trans, **line_props)\n+                            for p in positions]\n+            for line in self.artists:\n+                self.ax.add_line(line)\n+            try:\n+                ax.set_xlim(orig_xlim)\n+            except Exception:\n+                pass\n+        else:\n+            orig_ylim = ax.get_ylim()\n+            trans = ax.get_yaxis_transform(which='grid')\n+            self.artists = [mlines.Line2D([0, 1], [p, p], transform=trans, **line_props)\n+                            for p in positions]\n+            for line in self.artists:\n+                self.ax.add_line(line)\n+            try:\n+                ax.set_ylim(orig_ylim)\n+            except Exception:\n+                pass\n \n     @property\n     def positions(self):\n@@ -3406,4 +3429,4 @@ class Lasso(AxesWidget):\n             self.ax.draw_artist(self.line)\n             self.canvas.blit(self.ax.bbox)\n         else:\n-            self.canvas.draw_idle()\n+            self.canvas.draw_idle()\n\\ No newline at end of file\n"
    },
    "pylint-dev__pylint-4970": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "pylint-dev__pylint-4970",
        "model_patch": "diff --git a/pylint/checkers/similar.py b/pylint/checkers/similar.py\nindex c65b1c89..597bf344 100644\n--- a/pylint/checkers/similar.py\n+++ b/pylint/checkers/similar.py\n@@ -394,6 +394,8 @@ class Similar:\n \n     def _compute_sims(self) -> List[Tuple[int, Set[LinesChunkLimits_T]]]:\n         \"\"\"compute similarities in appended files\"\"\"\n+        if self.min_lines <= 0:\n+            return []\n         no_duplicates: Dict[int, List[Set[LinesChunkLimits_T]]] = defaultdict(list)\n \n         for commonality in self._iter_sims():\n"
    },
    "pytest-dev__pytest-5262": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "pytest-dev__pytest-5262",
        "model_patch": "diff --git a/src/_pytest/capture.py b/src/_pytest/capture.py\nindex 25eab7fd..3bb3dd17 100644\n--- a/src/_pytest/capture.py\n+++ b/src/_pytest/capture.py\n@@ -447,6 +447,20 @@ class EncodedFile(object):\n         \"\"\"Ensure that file.name is a string.\"\"\"\n         return repr(self.buffer)\n \n+    @property\n+    def mode(self):\n+        m = getattr(self.buffer, 'mode', '')\n+        if isinstance(m, str):\n+            return m.replace('b', '')\n+        return m\n+\n+    @property\n+    def mode(self):\n+        m = getattr(self.buffer, 'mode', '')\n+        if isinstance(m, str):\n+            return m.replace('b', '')\n+        return m\n+\n     def __getattr__(self, name):\n         return getattr(object.__getattribute__(self, \"buffer\"), name)\n \n"
    },
    "django__django-16901": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "django__django-16901",
        "model_patch": "diff --git a/django/db/models/sql/where.py b/django/db/models/sql/where.py\nindex aaab1730b7..aa39a94fc6 100644\n--- a/django/db/models/sql/where.py\n+++ b/django/db/models/sql/where.py\n@@ -7,6 +7,7 @@ from functools import reduce\n from django.core.exceptions import EmptyResultSet, FullResultSet\n from django.db.models.expressions import Case, When\n from django.db.models.lookups import Exact\n+from django.db.models.functions import Mod\n from django.utils import tree\n from django.utils.functional import cached_property\n \n@@ -135,7 +136,7 @@ class WhereNode(tree.Node):\n                 operator.add,\n                 (Case(When(c, then=1), default=0) for c in self.children),\n             )\n-            rhs = Exact(1, rhs_sum)\n+            rhs = Exact(1, Mod(rhs_sum, 2))\n             return self.__class__([lhs, rhs], AND, self.negated).as_sql(\n                 compiler, connection\n             )\n"
    },
    "scikit-learn__scikit-learn-10297": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "scikit-learn__scikit-learn-10297",
        "model_patch": "diff --git a/sklearn/linear_model/ridge.py b/sklearn/linear_model/ridge.py\nindex 911c74ae3..924e35ff8 100644\n--- a/sklearn/linear_model/ridge.py\n+++ b/sklearn/linear_model/ridge.py\n@@ -1333,10 +1333,10 @@ class RidgeClassifierCV(LinearClassifierMixin, _BaseRidgeCV):\n     advantage of the multi-variate response support in Ridge.\n     \"\"\"\n     def __init__(self, alphas=(0.1, 1.0, 10.0), fit_intercept=True,\n-                 normalize=False, scoring=None, cv=None, class_weight=None):\n+                 normalize=False, scoring=None, cv=None, store_cv_values=False, class_weight=None):\n         super(RidgeClassifierCV, self).__init__(\n             alphas=alphas, fit_intercept=fit_intercept, normalize=normalize,\n-            scoring=scoring, cv=cv)\n+            scoring=scoring, cv=cv, store_cv_values=store_cv_values)\n         self.class_weight = class_weight\n \n     def fit(self, X, y, sample_weight=None):\n"
    },
    "sympy__sympy-20801": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "sympy__sympy-20801",
        "model_patch": "diff --git a/sympy/logic/boolalg.py b/sympy/logic/boolalg.py\nindex fbcba1f8d4..ad0c36eb2c 100644\n--- a/sympy/logic/boolalg.py\n+++ b/sympy/logic/boolalg.py\n@@ -327,6 +327,17 @@ def __bool__(self):\n \n     def __hash__(self):\n         return hash(True)\n+    def __eq__(self, other):\n+        from sympy.core.sympify import _sympify, SympifyError\n+        try:\n+            other = _sympify(other)\n+        except SympifyError:\n+            return NotImplemented\n+        # Treat Float zeros as equal to false, but keep integers unequal\n+        from sympy.core.numbers import Number\n+        if isinstance(other, Number) and getattr(other, \"is_Float\", False):\n+            return not other\n+        return Basic.__eq__(self, other)\n \n     @property\n     def negated(self):\n@@ -395,6 +406,17 @@ def __bool__(self):\n \n     def __hash__(self):\n         return hash(False)\n+    def __eq__(self, other):\n+        from sympy.core.sympify import _sympify, SympifyError\n+        try:\n+            other = _sympify(other)\n+        except SympifyError:\n+            return NotImplemented\n+        # Treat Float zeros as equal to false, but keep integers unequal\n+        from sympy.core.numbers import Number\n+        if isinstance(other, Number) and getattr(other, \"is_Float\", False):\n+            return not other\n+        return Basic.__eq__(self, other)\n \n     @property\n     def negated(self):\n"
    },
    "matplotlib__matplotlib-23299": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "matplotlib__matplotlib-23299",
        "model_patch": "diff --git a/lib/matplotlib/__init__.py b/lib/matplotlib/__init__.py\nindex c268a56724..2ee9f94265 100644\n--- a/lib/matplotlib/__init__.py\n+++ b/lib/matplotlib/__init__.py\n@@ -1169,14 +1169,14 @@ if os.environ.get('MPLBACKEND'):\n \n def get_backend():\n     \"\"\"\n-    Return the name of the current backend.\n-\n-    See Also\n-    --------\n-    matplotlib.use\n+    Return the name of the current backend without forcing resolution of the\n+    \"auto\" backend. Accessing rcParams['backend'] can trigger backend\n+    resolution (and side effects like closing figures); use\n+    rcParams._get_backend_or_none() to avoid that and fall back to\n+    rcParamsOrig when appropriate.\n     \"\"\"\n-    return rcParams['backend']\n-\n+    backend = rcParams._get_backend_or_none()\n+    return backend if backend is not None else rcParamsOrig['backend']\n \n def interactive(b):\n     \"\"\"\n"
    },
    "django__django-15128": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "django__django-15128",
        "model_patch": "diff --git a/django/db/models/sql/query.py b/django/db/models/sql/query.py\nindex aaf35ee37c..5eedf010a2 100644\n--- a/django/db/models/sql/query.py\n+++ b/django/db/models/sql/query.py\n@@ -845,7 +845,42 @@ class Query(BaseExpression):\n         Change the aliases in change_map (which maps old-alias -> new-alias),\n         relabelling any references to them in select columns and the where\n         clause.\n+\n+        The original implementation required that the set of keys in change_map\n+        be disjoint from its values. In some complex combine/join situations\n+        aliases may need to be remapped in a way that produces overlaps\n+        (e.g. T4 -> T5 and T5 -> T6). To handle these safely we perform a\n+        two-phase rename when overlaps are detected: first rename all affected\n+        old aliases to temporary unique aliases, then apply the final renames\n+        from those temporaries to the requested targets.\n         \"\"\"\n+        # Fast path: no cycles or overlaps.\n+        if set(change_map).isdisjoint(change_map.values()):\n+            pass\n+        else:\n+            # Create a temporary alias for every key in change_map so that we\n+            # avoid any clashes or repeated renames. Doing all keys at once\n+            # guarantees termination.\n+            import uuid\n+            temp_map = {}\n+            existing = set(self.alias_map) | set(change_map.keys()) | set(change_map.values())\n+            for old in list(change_map.keys()):\n+                base = \"__temp_%s\" % uuid.uuid4().hex[:6]\n+                candidate = base\n+                j = 0\n+                while candidate in existing:\n+                    j += 1\n+                    candidate = \"%s_%d\" % (base, j)\n+                existing.add(candidate)\n+                temp_map[old] = candidate\n+            # First move all old aliases to temporaries.\n+            self.change_aliases(temp_map)\n+            # Then move temporaries to final targets.\n+            second_map = {temp_map[old]: change_map[old] for old in change_map}\n+            self.change_aliases(second_map)\n+            return\n+\n+        # No overlaps (or we've already handled them), proceed with the normal work.\n         assert set(change_map).isdisjoint(change_map.values())\n \n         # 1. Update references in \"select\" (normal columns plus aliases),\n@@ -878,7 +913,6 @@ class Query(BaseExpression):\n             change_map.get(alias, alias): (aliased or alias in change_map)\n             for alias, aliased in self.external_aliases.items()\n         }\n-\n     def bump_prefix(self, outer_query):\n         \"\"\"\n         Change the alias prefix to the next letter in the alphabet in a way\ndiff --git a/reproduce_alias_conflict.py b/reproduce_alias_conflict.py\nnew file mode 100755\nindex 0000000000..80cb88ad2b\n--- /dev/null\n+++ b/reproduce_alias_conflict.py\n@@ -0,0 +1,40 @@\n+#!/usr/bin/env python3\n+# Quick reproduction using internal Query structures.\n+from django.db.models.sql.query import Query\n+from django.db.models.sql.datastructures import Join\n+from django.db import models\n+\n+# Create dummy models\n+class A(models.Model):\n+    class Meta:\n+        app_label = 'app'\n+        db_table = 'a_table'\n+\n+class B(models.Model):\n+    class Meta:\n+        app_label = 'app'\n+        db_table = 'b_table'\n+\n+# Build a Query that simulates alias_map entries T4 and T5.\n+q = Query(A)\n+# Manually populate alias_map and table_map to simulate a realistic state.\n+# Create alias entries\n+from django.db.models.sql.datastructures import Join\n+# Minimal fake Join-like object with required attributes and relabeled_clone.\n+class FakeJoin:\n+    def __init__(self, table_name):\n+        self.table_name = table_name\n+    def relabeled_clone(self, change_map):\n+        # Return a shallow copy with table_name preserved\n+        return FakeJoin(self.table_name)\n+\n+q.alias_map = {'T4': FakeJoin('b_table'), 'T5': FakeJoin('b_table')}\n+q.alias_refcount = {'T4': 1, 'T5': 1}\n+q.table_map = {'b_table': ['T4', 'T5']}\n+q.external_aliases = {}\n+\n+# Now call change_aliases with overlapping map: T4->T5, T5->T6\n+print(\"Before:\", q.alias_map.keys(), q.table_map)\n+q.change_aliases({'T4': 'T5', 'T5': 'T6'})\n+print(\"After:\", q.alias_map.keys(), q.table_map)\n+print(\"Alias refcounts:\", q.alias_refcount)\n"
    },
    "sympy__sympy-18199": {
        "model_name_or_path": "tensorblock/gpt-5-mini",
        "instance_id": "sympy__sympy-18199",
        "model_patch": "diff --git a/sympy/ntheory/residue_ntheory.py b/sympy/ntheory/residue_ntheory.py\nindex 9a3052d4c3..bfc66df141 100644\n--- a/sympy/ntheory/residue_ntheory.py\n+++ b/sympy/ntheory/residue_ntheory.py\n@@ -768,6 +768,12 @@ def nthroot_mod(a, n, p, all_roots=False):\n     \"\"\"\n     from sympy.core.numbers import igcdex\n     a, n, p = as_int(a), as_int(n), as_int(p)\n+    # If a is divisible by p then x \u2261 0 (mod p) is a root of x**n \u2261 a (mod p)\n+    if p != 0 and a % p == 0:\n+        if all_roots:\n+            return [0]\n+        else:\n+            return 0\n     if n == 2:\n         return sqrt_mod(a, p, all_roots)\n     # see Hackman \"Elementary Number Theory\" (2009), page 76\n"
    }
}